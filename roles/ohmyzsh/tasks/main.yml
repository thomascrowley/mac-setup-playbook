- name: Get ZSH Custom Path
  shell: |
    echo "${ZSH_CUSTOM:-~/.oh-my-zsh/custom}"
  register: zsh_custom
- name: set ZSH Custom Path
  set_fact:
    zsh_custom: "{{ zsh_custom.stdout }}"

- name: Install ZSH Plugins & Themes
  git:
    repo: "{{item.repo}}"
    dest: "{{zsh_custom}}/{{item.dest}}"
    depth: 1
  with_items:
    - repo: https://github.com/zsh-users/zsh-autosuggestions
      dest: "plugins/zsh-autosuggestions"
    - repo: https://github.com/romkatv/powerlevel10k.git
      dest: themes/powerlevel10k
